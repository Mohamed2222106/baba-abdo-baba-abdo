<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ø¹Ù…</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f8f9fa; text-align: center; }
        h1 { color: #333; }
        .container { width: 80%; margin: auto; }
        .section { background: white; padding: 15px; margin: 10px 0; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
        .menu-section h2, .table-section h2 { color: #007bff; }
        .menu-item, .order-item, .table-item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #ddd; }
        button { margin: 5px; padding: 10px; border: none; cursor: pointer; border-radius: 5px; }
        .add-btn { background: #007bff; color: white; }
        .delete { background: red; color: white; }
        .note-btn { background: orange; color: white; }
    </style>
</head>
<body>
    <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ø¹Ù…</h1>
    <div class="container">

        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø§ÙˆÙ„Ø§Øª -->
        <div class="section table-section">
            <h2>ğŸª‘ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø§ÙˆÙ„Ø§Øª</h2>
            <button class="add-btn" onclick="addTable()">+ Ø¥Ø¶Ø§ÙØ© Ø·Ø§ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <div id="tables"></div>
        </div>

        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ÙŠÙˆ -->
        <div class="section menu-section">
            <h2>ğŸ½ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ÙŠÙˆ</h2>
            <button class="add-btn" onclick="addSection()">+ Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯</button>
            <div id="menu"></div>
        </div>
    </div>

    <script>
        let menu = JSON.parse(localStorage.getItem("menu")) || {};
        let tables = JSON.parse(localStorage.getItem("tables")) || {};

        function saveData() {
            localStorage.setItem("menu", JSON.stringify(menu));
            localStorage.setItem("tables", JSON.stringify(tables));
        }

        /* Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø§ÙˆÙ„Ø§Øª */
        function renderTables() {
            let tablesDiv = document.getElementById("tables");
            tablesDiv.innerHTML = "";
            Object.keys(tables).forEach(tableId => {
                let tableDiv = document.createElement("div");
                tableDiv.className = "table-item";
                tableDiv.innerHTML = `
                    <strong>Ø·Ø§ÙˆÙ„Ø© ${tableId}</strong>
                    <button onclick="viewOrders('${tableId}')">ğŸ“œ Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
                    <button class="delete" onclick="deleteTable('${tableId}')">âŒ Ø­Ø°Ù</button>
                `;
                tablesDiv.appendChild(tableDiv);
            });
        }

        function addTable() {
            let tableId = prompt("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø©:");
            if (tableId && !tables[tableId]) {
                tables[tableId] = [];
                saveData();
                renderTables();
            }
        }

        function deleteTable(tableId) {
            if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ${tableId}ØŸ`)) {
                delete tables[tableId];
                saveData();
                renderTables();
            }
        }

        function viewOrders(tableId) {
            let orders = tables[tableId] || [];
            let orderList = orders.map((o, i) => `
                <div class="order-item">
                    ${o.name} ${o.type ? `(${o.type})` : ""} ${o.note ? `- Ù…Ù„Ø§Ø­Ø¸Ø©: ${o.note}` : ""}
                    <button onclick="setOrderType('${tableId}', ${i}, 'Ø§Ø³Ø¨Ø§Ø¬ØªÙŠ')">Ø§Ø³Ø¨Ø§Ø¬ØªÙŠ</button>
                    <button onclick="setOrderType('${tableId}', ${i}, 'Ù…Ù‚ØµÙˆØµØ©')">Ù…Ù‚ØµÙˆØµØ©</button>
                    <button class="note-btn" onclick="addNote('${tableId}', ${i})">Ù…Ù„Ø­ÙˆØ¸Ø©</button>
                    <button class="delete" onclick="removeOrder('${tableId}', ${i})">âŒ</button>
                </div>
            `).join("");

            let orderWindow = window.open("", "", "width=500,height=600");
            orderWindow.document.write(`<h2>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ${tableId}</h2>${orderList}`);
        }

        function addNote(tableId, index) {
            let note = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©:");
            if (note) {
                tables[tableId][index].note = note;
                saveData();
                viewOrders(tableId);
            }
        }

        function setOrderType(tableId, index, type) {
            tables[tableId][index].type = type;
            saveData();
            viewOrders(tableId);
        }

        function removeOrder(tableId, index) {
            tables[tableId].splice(index, 1);
            saveData();
            viewOrders(tableId);
        }

        /* Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ÙŠÙˆ */
        function renderMenu() {
            let menuDiv = document.getElementById("menu");
            menuDiv.innerHTML = "";
            Object.keys(menu).forEach(section => {
                let sectionDiv = document.createElement("div");
                sectionDiv.className = "menu-section";
                sectionDiv.innerHTML = `
                    <h2>${section} 
                        <button class="delete" onclick="deleteSection('${section}')">âŒ Ø­Ø°Ù</button>
                    </h2>
                    <button class="add-btn" onclick="addItem('${section}')">+ Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù</button>
                    <div id="items-${section}"></div>
                `;
                menuDiv.appendChild(sectionDiv);
                renderItems(section);
            });
        }

        function renderItems(section) {
            let itemsDiv = document.getElementById(`items-${section}`);
            itemsDiv.innerHTML = "";
            menu[section].forEach(item => {
                let itemDiv = document.createElement("div");
                itemDiv.className = "menu-item";
                itemDiv.innerHTML = `
                    ${item} 
                    <button onclick="selectTableForOrder('${item}')">â• Ø£Ø¶Ù Ù„Ù„Ø·Ø§ÙˆÙ„Ø©</button>
                `;
                itemsDiv.appendChild(itemDiv);
            });
        }

        function selectTableForOrder(itemName) {
            let tableId = prompt("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø©:");
            if (tableId && tables[tableId]) {
                tables[tableId].push({ name: itemName, type: "", note: "" });
                saveData();
                alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${itemName} Ø¥Ù„Ù‰ Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ${tableId}`);
            } else {
                alert("Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©!");
            }
        }

        function addSection() {
            let sectionName = prompt("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯:");
            if (sectionName && !menu[sectionName]) {
                menu[sectionName] = [];
                saveData();
                renderMenu();
            }
        }

        function deleteSection(section) {
            if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‚Ø³Ù… "${section}"ØŸ`)) {
                delete menu[section];
                saveData();
                renderMenu();
            }
        }

        function addItem(section) {
            let itemName = prompt(`Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ù‚Ø³Ù… "${section}":`);
            if (itemName) {
                menu[section].push(itemName);
                saveData();
                renderItems(section);
            }
        }

        renderTables();
        renderMenu();
    </script>
</body>
</html>
