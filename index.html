<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بابا عبده</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            direction: rtl;
            background-color: #f8f8f8;
            margin: 0;
            padding: 0;
        }

        header {
            background: #ff6600;
            color: white;
            padding: 15px;
            font-size: 24px;
            position: relative;
        }

        .small-text {
            position: absolute;
            left: 10px;
            top: 5px;
            font-size: 12px;
            color: white;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            background: #ADD8E6;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            opacity: 0.8;
        }

        .table {
            width: 100px;
            height: 100px;
            background: white;
            border: 2px solid #ff6600;
            margin: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .menu-section {
            background: white;
            padding: 10px;
            margin: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .menu-section h3 {
            margin: 0;
            padding: 10px;
            background: #ff6600;
            color: white;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<header>
    <h1>بابا عبده</h1>
    <span class="small-text">محمد وليد سعيد حسن عبد الهادي</span>
</header>

<main id="main-content">
    <button onclick="createTables()">إنشاء ترابيزات</button>
    <button onclick="manageMenu()">إدارة المنيو</button>
    <div id="tablesContainer"></div>
</main>

<script>
    function createTables() {
        let num = prompt("كم عدد الترابيزات؟");
        if (!num || isNaN(num) || num <= 0) return;
        localStorage.setItem("numTables", num);
        loadTables();
    }

    function loadTables() {
        let num = localStorage.getItem("numTables") || 0;
        let container = document.getElementById("tablesContainer");
        container.innerHTML = "";
        for (let i = 1; i <= num; i++) {
            let table = document.createElement("div");
            table.classList.add("table");
            table.textContent = `طاولة ${i}`;
            table.setAttribute("data-table", i);
            table.onclick = () => openTable(i);
            container.appendChild(table);
        }
    }

    function openTable(tableNumber) {
        localStorage.setItem("currentTable", tableNumber);
        showMenu();
    }

    function showMenu() {
        let menu = JSON.parse(localStorage.getItem("menu")) || {};
        let content = `<h2>اختر من القائمة</h2>`;
        for (let section in menu) {
            content += `<div class="menu-section">
                <h3>${section}</h3>`;
            menu[section].forEach((item, index) => {
                content += `<button onclick="addToOrder('${section}', ${index})">${item.name} - ${item.price} جنيه</button>`;
            });
            content += `</div>`;
        }
        content += `<button onclick="loadHomeScreen()">رجوع</button>`;
        document.getElementById("main-content").innerHTML = content;
    }

    function addToOrder(section, index) {
        let tableNumber = localStorage.getItem("currentTable");
        let menu = JSON.parse(localStorage.getItem("menu")) || {};
        let item = menu[section][index];
        let orders = JSON.parse(localStorage.getItem(`orders_${tableNumber}`)) || [];
        orders.push(item);
        localStorage.setItem(`orders_${tableNumber}`, JSON.stringify(orders));
        alert("تمت إضافة الطلب!");
    }

    function manageMenu() {
        let content = `<h2>إدارة المنيو</h2>
            <button onclick="addSection()">إضافة قسم</button>
            <div id="menuList"></div>
            <button onclick="loadHomeScreen()">رجوع</button>`;
        document.getElementById("main-content").innerHTML = content;
        displayMenuItems();
    }

    function addSection() {
        let sectionName = prompt("اسم القسم الجديد:");
        if (!sectionName) return;
        let menu = JSON.parse(localStorage.getItem("menu")) || {};
        if (!menu[sectionName]) menu[sectionName] = [];
        localStorage.setItem("menu", JSON.stringify(menu));
        displayMenuItems();
    }

    function addMenuItem(section) {
        let name = prompt("اسم الصنف:");
        let price = prompt("السعر:");
        if (!name || !price || isNaN(price)) return;
        let menu = JSON.parse(localStorage.getItem("menu")) || {};
        menu[section].push({ name, price });
        localStorage.setItem("menu", JSON.stringify(menu));
        displayMenuItems();
    }

    function editSection(oldName) {
        let newName = prompt("أدخل الاسم الجديد للقسم:", oldName);
        if (!newName) return;
        let menu = JSON.parse(localStorage.getItem("menu")) || {};
        menu[newName] = menu[oldName];
        delete menu[oldName];
        localStorage.setItem("menu", JSON.stringify(menu));
        displayMenuItems();
    }

    function deleteSection(section) {
        let menu = JSON.parse(localStorage.getItem("menu")) || {};
        delete menu[section];
        localStorage.setItem("menu", JSON.stringify(menu));
        displayMenuItems();
    }

    function displayMenuItems() {
        let menu = JSON.parse(localStorage.getItem("menu")) || {};
        let menuList = document.getElementById("menuList");
        menuList.innerHTML = "";
        for (let section in menu) {
            let div = document.createElement("div");
            div.classList.add("menu-section");
            div.innerHTML = `
                <h3>${section} <button onclick="editSection('${section}')">✏️</button> <button onclick="deleteSection('${section}')">❌</button></h3>
                ${menu[section].map((item, index) => 
                    `<div>${item.name} - ${item.price} جنيه <button onclick="removeMenuItem('${section}', ${index})">❌</button></div>`
                ).join("")}
                <button onclick="addMenuItem('${section}')">إضافة صنف</button>
            `;
            menuList.appendChild(div);
        }
    }

    function removeMenuItem(section, index) {
        let menu = JSON.parse(localStorage.getItem("menu")) || {};
        menu[section].splice(index, 1);
        localStorage.setItem("menu", JSON.stringify(menu));
        displayMenuItems();
    }

    function loadHomeScreen() {
        document.getElementById("main-content").innerHTML = `
            <button onclick="createTables()">إنشاء ترابيزات</button>
            <button onclick="manageMenu()">إدارة المنيو</button>
            <div id="tablesContainer"></div>
        `;
        loadTables();
    }

    loadHomeScreen();
</script>

</body>
</html>
